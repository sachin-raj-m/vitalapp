module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},90821,a=>{"use strict";let b=(0,a.i(70106).default)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],90821)},24452,a=>{"use strict";var b=a.i(87924),c=a.i(90821),d=a.i(70106);let e=(0,d.default)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),f=(0,d.default)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),g=(0,d.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["Alert",0,({title:a,children:d,variant:h="info",onClose:i,className:j=""})=>{let k={info:(0,b.jsx)(f,{className:"h-5 w-5 text-blue-400"}),success:(0,b.jsx)(e,{className:"h-5 w-5 text-green-400"}),warning:(0,b.jsx)(c.AlertCircle,{className:"h-5 w-5 text-yellow-400"}),error:(0,b.jsx)(c.AlertCircle,{className:"h-5 w-5 text-red-400"})},l=`
    rounded-md p-4
    ${{info:"bg-blue-50 text-blue-800",success:"bg-green-50 text-green-800",warning:"bg-yellow-50 text-yellow-800",error:"bg-red-50 text-red-800"}[h]}
    ${j}
  `;return(0,b.jsx)("div",{className:l,children:(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:k[h]}),(0,b.jsxs)("div",{className:"ml-3 flex-1",children:[a&&(0,b.jsx)("h3",{className:"text-sm font-medium",children:a}),(0,b.jsx)("div",{className:`text-sm ${a?"mt-2":""}`,children:d})]}),i&&(0,b.jsx)("div",{className:"ml-auto pl-3",children:(0,b.jsx)("div",{className:"-mx-1.5 -my-1.5",children:(0,b.jsxs)("button",{type:"button",onClick:i,className:`
                  inline-flex rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2
                  ${"info"===h?"text-blue-500 hover:bg-blue-100 focus:ring-blue-600":""}
                  ${"success"===h?"text-green-500 hover:bg-green-100 focus:ring-green-600":""}
                  ${"warning"===h?"text-yellow-500 hover:bg-yellow-100 focus:ring-yellow-600":""}
                  ${"error"===h?"text-red-500 hover:bg-red-100 focus:ring-red-600":""}
                `,children:[(0,b.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,b.jsx)(g,{className:"h-5 w-5"})]})})})]})})}],24452)},33354,(a,b,c)=>{"use strict";c._=function(a){return a&&a.__esModule?a:{default:a}}},24987,a=>{"use strict";let b=(0,a.i(70106).default)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["MapPin",()=>b],24987)},32245,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"BailoutToCSR",{enumerable:!0,get:function(){return e}});let d=a.r(41997);function e({reason:a,children:b}){throw Object.defineProperty(new d.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},7773,(a,b,c)=>{"use strict";function d(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"encodeURIPath",{enumerable:!0,get:function(){return d}})},97458,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"PreloadChunks",{enumerable:!0,get:function(){return h}});let d=a.r(87924),e=a.r(35112),f=a.r(56704),g=a.r(7773);function h({moduleIds:a}){let b=f.workAsyncStorage.getStore();if(void 0===b)return null;let c=[];if(b.reactLoadableManifest&&a){let d=b.reactLoadableManifest;for(let b of a){if(!d[b])continue;let a=d[b].files;c.push(...a)}}return 0===c.length?null:(0,d.jsx)(d.Fragment,{children:c.map(a=>{let c=`${b.assetPrefix}/_next/${(0,g.encodeURIPath)(a)}`;return a.endsWith(".css")?(0,d.jsx)("link",{precedence:"dynamic",href:c,rel:"stylesheet",as:"style",nonce:b.nonce},a):((0,e.preload)(c,{as:"script",fetchPriority:"low",nonce:b.nonce}),null)})})}},69853,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return j}});let d=a.r(87924),e=a.r(72131),f=a.r(32245),g=a.r(97458);function h(a){return{default:a&&"default"in a?a.default:a}}let i={loader:()=>Promise.resolve(h(()=>null)),loading:null,ssr:!0},j=function(a){let b={...i,...a},c=(0,e.lazy)(()=>b.loader().then(h)),j=b.loading;function k(a){let h=j?(0,d.jsx)(j,{isLoading:!0,pastDelay:!0,error:null}):null,i=!b.ssr||!!b.loading,k=i?e.Suspense:e.Fragment,l=b.ssr?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.PreloadChunks,{moduleIds:b.modules}),(0,d.jsx)(c,{...a})]}):(0,d.jsx)(f.BailoutToCSR,{reason:"next/dynamic",children:(0,d.jsx)(c,{...a})});return(0,d.jsx)(k,{...i?{fallback:h}:{},children:l})}return k.displayName="LoadableComponent",k}},19721,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return e}});let d=a.r(33354)._(a.r(69853));function e(a,b){let c={};"function"==typeof a&&(c.loader=a);let e={...c,...b};return(0,d.default)({...e,modules:e.loadableGenerated?.modules})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},63519,a=>{"use strict";let b=(0,a.i(70106).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);a.s(["Phone",()=>b],63519)},39093,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(19721),e=a.i(78560),f=a.i(12466),g=a.i(34904),h=a.i(24987),i=a.i(63519);let j=(0,a.i(70106).default)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);var k=a.i(24452);let l=(0,d.default)(async()=>{},{loadableGenerated:{modules:[5481]},ssr:!1,loading:()=>(0,b.jsx)("div",{className:"h-[500px] w-full bg-gray-100 animate-pulse rounded-lg"})});function m(){let[a,d]=(0,c.useState)({lat:20.5937,lng:78.9629}),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{try{let{data:a,error:b}=await e.supabase.from("profiles").select("id, full_name, blood_group, phone, location").eq("is_donor",!0);if(b)throw b;let c=a?.map(a=>({...a,location:"string"==typeof a.location?JSON.parse(a.location):a.location}))||[];n(c)}catch(a){console.error("Error fetching donors:",a),t(a.message)}finally{r(!1)}})()},[]);let w=(0,c.useCallback)(()=>{if(v("Locating..."),!("geolocation"in navigator)){t("Geolocation not supported by your browser."),v("");return}navigator.geolocation.getCurrentPosition(a=>{d({lat:a.coords.latitude,lng:a.coords.longitude}),v("")},a=>{t("Unable to get your location: "+a.message),v("")},{enableHighAccuracy:!0,timeout:1e4})},[]);return(0,c.useEffect)(()=>{p(m.filter(a=>a.location&&a.location.latitude&&a.location.longitude).map(b=>{var c,d,e,f;let g,h,i,j,k=(c=a.lat,d=a.lng,e=b.location.latitude,f=b.location.longitude,h=(g=a=>a*Math.PI/180)(e-c),i=g(f-d),2*Math.atan2(Math.sqrt(j=Math.sin(h/2)**2+Math.cos(g(c))*Math.cos(g(e))*Math.sin(i/2)**2),Math.sqrt(1-j))*6371);return{...b,distanceKm:k}}).sort((a,b)=>(a.distanceKm||0)-(b.distanceKm||0)).slice(0,20))},[a,m]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Nearby Donors"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Find registered donors in your area"})]}),(0,b.jsx)(f.Button,{onClick:w,leftIcon:(0,b.jsx)(j,{className:"h-4 w-4"}),disabled:!!u,children:u||"Use My Location"})]}),s&&(0,b.jsx)(k.Alert,{variant:"error",children:s}),(0,b.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-2 h-[500px] border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:(0,b.jsx)(l,{center:a,zoom:11,markers:[{position:a,title:"You are here"},...o.map(a=>({position:{lat:a.location.latitude,lng:a.location.longitude},title:a.full_name,description:`${a.blood_group} | ${a.distanceKm?.toFixed(1)} km away`}))]})}),(0,b.jsxs)("div",{className:"lg:col-span-1 space-y-4 h-[500px] overflow-y-auto pr-2 custom-scrollbar",children:[(0,b.jsxs)("h2",{className:"font-semibold text-gray-700 bg-gray-50 p-2 rounded",children:["Closest Donors (",o.length,")"]}),0===o.length?(0,b.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No donors found nearby. Try expanding your search or waiting for donors to load."}):o.map(a=>(0,b.jsx)(g.Card,{className:"hover:shadow-md transition-shadow",children:(0,b.jsxs)(g.CardBody,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-gray-900 flex items-center",children:a.full_name}),(0,b.jsx)("span",{className:"inline-block bg-primary-100 text-primary-800 text-xs px-2 py-0.5 rounded-full font-bold mt-1",children:a.blood_group})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[a.distanceKm?.toFixed(1)," km"]}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"away"})]})]}),(0,b.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-100 flex justify-between items-center",children:[a.phone?(0,b.jsxs)("a",{href:`tel:${a.phone}`,className:"text-sm text-secondary-600 hover:text-secondary-700 flex items-center font-medium",children:[(0,b.jsx)(i.Phone,{className:"h-3 w-3 mr-1"}),"Call Now"]}):(0,b.jsx)("span",{className:"text-xs text-gray-400 italic",children:"No phone shared"}),(0,b.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,b.jsx)(h.MapPin,{className:"h-3 w-3 mr-1"}),a.location.address?.split(",")[0]||"Unknown Location"]})]})]})},a.id))]})]})]})}a.s(["default",()=>m],39093)}];

//# sourceMappingURL=_1bd10591._.js.map