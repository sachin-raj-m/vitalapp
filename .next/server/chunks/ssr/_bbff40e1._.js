module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},41675,a=>{"use strict";let b=(0,a.i(70106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},41710,a=>{"use strict";let b=(0,a.i(70106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],41710)},33354,(a,b,c)=>{"use strict";c._=function(a){return a&&a.__esModule?a:{default:a}}},24987,a=>{"use strict";let b=(0,a.i(70106).default)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["MapPin",()=>b],24987)},76472,a=>{"use strict";let b=(0,a.i(70106).default)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);a.s(["Heart",()=>b],76472)},92994,a=>{"use strict";var b=a.i(87924),c=a.i(12466);a.s(["EmptyState",0,({icon:a,title:d,description:e,actionLabel:f,onAction:g,className:h})=>(0,b.jsxs)("div",{className:`flex flex-col items-center justify-center py-12 px-4 text-center bg-white rounded-lg border border-gray-100 shadow-sm ${h||""}`,children:[(0,b.jsx)("div",{className:"bg-primary-50 p-4 rounded-full mb-4",children:(0,b.jsx)(a,{className:"h-8 w-8 text-primary-500"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:d}),(0,b.jsx)("p",{className:"text-gray-500 text-sm max-w-sm mb-6 leading-relaxed",children:e}),f&&g&&(0,b.jsx)(c.Button,{onClick:g,variant:"primary",children:f})]})])},93518,a=>{"use strict";let b=(0,a.i(70106).default)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);a.s(["Award",()=>b],93518)},90669,a=>{"use strict";let b=(0,a.i(70106).default)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);a.s(["Activity",()=>b],90669)},3314,a=>{"use strict";let b=(0,a.i(70106).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);a.s(["Shield",()=>b],3314)},24445,25551,17139,a=>{"use strict";var b=a.i(87924),c=a.i(10738),d=a.i(24987),e=a.i(41710),f=a.i(41675),g=a.i(46271),h=a.i(34904),i=a.i(34048),j=a.i(12466);let k={"O-":["O-"],"O+":["O-","O+"],"A-":["O-","A-"],"A+":["O-","O+","A-","A+"],"B-":["O-","B-"],"B+":["O-","O+","B-","B+"],"AB-":["O-","A-","B-","AB-"],"AB+":["O-","O+","A-","A+","B-","B+","AB-","AB+"]};function l(a,b){let c=k[b];return!!c&&c.includes(a)}a.s(["isBloodCompatible",()=>l],25551);var m=a.i(72131),n=a.i(70106);let o=(0,n.default)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),p=(0,n.default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),q=({title:a,text:c,url:d})=>{let[e,f]=(0,m.useState)(!1),[g,h]=(0,m.useState)(!1),i=async()=>{h(!0);let b=d||window.location.href;try{"undefined"!=typeof navigator&&navigator.share?await navigator.share({title:a,text:c,url:b}):(await navigator.clipboard.writeText(`${a}
${c}
${b}`),f(!0),setTimeout(()=>f(!1),2e3))}catch(a){console.error("Error sharing:",a)}finally{h(!1)}};return(0,b.jsx)(j.Button,{variant:"ghost",size:"sm",onClick:i,className:`text-gray-500 hover:text-primary-600 transition-colors ${e?"text-success-600":""}`,title:"Share this request",children:e?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p,{className:"h-4 w-4 mr-1"}),(0,b.jsx)("span",{className:"text-xs",children:"Copied"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o,{className:"h-4 w-4 mr-1"}),(0,b.jsx)("span",{className:"text-xs",children:"Share"})]})})};a.s(["BloodRequestCard",0,({request:a,onRespond:k,onPendingClick:m,userBloodGroup:n,hasOffered:o,isOwnRequest:p})=>{let{badgeVariant:r,cardBorder:s,animation:t}=(a=>{switch(a){case"High":return{badgeVariant:"error",cardBorder:"border-l-4 border-l-error-500",animation:"animate-pulse-urgent"};case"Medium":return{badgeVariant:"warning",cardBorder:"border-l-4 border-l-warning-500",animation:""};case"Low":return{badgeVariant:"success",cardBorder:"border-l-4 border-l-success-500",animation:""};default:return{badgeVariant:"neutral",cardBorder:"",animation:""}}})(a.urgency_level),u=(a=>{switch(a){case"A+":return"bg-red-100 text-red-800";case"A-":return"bg-red-50 text-red-800";case"B+":return"bg-orange-100 text-orange-800";case"B-":return"bg-orange-50 text-orange-800";case"AB+":return"bg-purple-100 text-purple-800";case"AB-":return"bg-purple-50 text-purple-800";case"O+":return"bg-blue-100 text-blue-800";case"O-":return"bg-blue-50 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(a.blood_group),v=(0,c.formatDistanceToNow)(new Date(a.created_at),{addSuffix:!0});return(0,b.jsx)(g.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},transition:{duration:.3},children:(0,b.jsx)(h.Card,{className:`overflow-hidden ${s} ${t}`,children:(0,b.jsx)(h.CardBody,{className:"p-0",children:(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("span",{className:`inline-flex items-center justify-center w-10 h-10 rounded-full font-bold text-lg ${u}`,children:a.blood_group}),(0,b.jsxs)("div",{className:"ml-3",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[a.units_needed," unit",a.units_needed>1?"s":""," needed"]}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.contact_name})]})]}),(0,b.jsxs)(i.Badge,{variant:r,className:"ml-2",children:[a.urgency_level," Priority"]})]}),(0,b.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,b.jsx)(d.MapPin,{className:"h-4 w-4 mr-1 text-gray-400"}),(0,b.jsx)("span",{children:a.hospital_name})]}),(0,b.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,b.jsx)(e.Clock,{className:"h-4 w-4 mr-1 text-gray-400"}),(0,b.jsxs)("span",{children:["Posted ",v]})]}),a.date_needed&&(0,b.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,b.jsx)(f.Calendar,{className:"h-4 w-4 mr-1 text-gray-400"}),(0,b.jsxs)("span",{children:["Needed by ",new Date(a.date_needed).toLocaleDateString()]})]}),a.notes&&(0,b.jsxs)("p",{className:"text-sm text-gray-700 mt-2 bg-gray-50 p-2 rounded",children:['"',a.notes,'"']})]}),(0,b.jsxs)("div",{className:"mt-4 flex justify-between items-center gap-2",children:[(0,b.jsx)(q,{title:`Urgent: ${a.blood_group} Blood Needed`,text:`${a.hospital_name} needs ${a.units_needed} units of ${a.blood_group} blood. Please help!`}),(0,b.jsx)("div",{className:"flex justify-end items-center gap-2",children:p?(0,b.jsx)(j.Button,{variant:"outline",size:"sm",disabled:!0,className:"text-primary-600 border-primary-200 bg-primary-50",children:"Your Request"}):k&&(0,b.jsx)(b.Fragment,{children:o?(0,b.jsxs)(j.Button,{variant:"secondary",size:"sm",onClick:m||k,className:"text-white bg-orange-500 hover:bg-orange-600 border-transparent shadow-sm flex items-center gap-1",children:[(0,b.jsx)(e.Clock,{className:"w-4 h-4"}),"Complete Donation"]}):n&&!l(n,a.blood_group)?(0,b.jsxs)(j.Button,{variant:"outline",size:"sm",disabled:!0,className:"text-red-400 border-red-100 bg-red-50 cursor-not-allowed w-full sm:w-auto",children:["Incompatible (",n,")"]}):(0,b.jsx)(j.Button,{variant:"primary",size:"sm",onClick:k,children:"I can donate"})})})]})]})})})})}],24445),a.s(["Skeleton",0,({className:a})=>(0,b.jsx)("div",{className:`animate-pulse bg-gray-200 rounded-md ${a||""}`})],17139)},64245,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(90669),g=a.i(41675),h=a.i(76472),i=a.i(3314),j=a.i(93518),k=a.i(95756),l=a.i(34904),m=a.i(12466),n=a.i(24445),o=a.i(53131),p=a.i(78560),q=a.i(25551),r=a.i(58419),s=a.i(5483),t=a.i(12055);function u(a){let b=(0,r.toDate)(a);return b.setHours(0,0,0,0),b}var v=a.i(8668);function w(a,b){let c=a.getFullYear()-b.getFullYear()||a.getMonth()-b.getMonth()||a.getDate()-b.getDate()||a.getHours()-b.getHours()||a.getMinutes()-b.getMinutes()||a.getSeconds()-b.getSeconds()||a.getMilliseconds()-b.getMilliseconds();return c<0?-1:c>0?1:c}var x=a.i(17139);let y=()=>(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Skeleton,{className:"h-8 w-48"}),(0,b.jsx)(x.Skeleton,{className:"h-4 w-64"})]}),(0,b.jsx)(x.Skeleton,{className:"h-10 w-32 rounded-full"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(a=>(0,b.jsx)(l.Card,{className:"h-48",children:(0,b.jsxs)(l.CardBody,{className:"flex flex-col h-full justify-between",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)(x.Skeleton,{className:"h-5 w-24"}),(0,b.jsx)(x.Skeleton,{className:"h-5 w-5 rounded-full"})]}),(0,b.jsx)(x.Skeleton,{className:"h-8 w-16"}),(0,b.jsx)(x.Skeleton,{className:"h-4 w-32"})]}),(0,b.jsx)(x.Skeleton,{className:"h-9 w-full mt-4"})]})},a))}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)(x.Skeleton,{className:"h-7 w-48"}),(0,b.jsx)(x.Skeleton,{className:"h-4 w-24"})]}),(0,b.jsx)("div",{className:"space-y-4",children:[1,2].map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-4 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)(x.Skeleton,{className:"w-10 h-10 rounded-full"}),(0,b.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,b.jsx)(x.Skeleton,{className:"h-5 w-1/3"}),(0,b.jsx)(x.Skeleton,{className:"h-4 w-1/4"})]})]}),(0,b.jsx)(x.Skeleton,{className:"h-20 w-full rounded-lg"})]},a))})]})]});var z=a.i(92994),A=a.i(73922);function B(){var a;let{user:x}=(0,o.useAuth)(),B=(0,e.useRouter)(),{requests:C,myDonations:D,loading:E}=(0,A.useRequests)(),[F,G]=(0,c.useState)({completedDonations:0,livesImpacted:0}),[H,I]=(0,c.useState)([]),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(!0);(0,c.useEffect)(()=>{x&&N()},[x]),(0,c.useEffect)(()=>{C.length>0&&x?.blood_group?I(C.filter(a=>a.user_id!==x.id&&!!x.blood_group&&!!a.blood_group&&!!(0,q.isBloodCompatible)(x.blood_group,a.blood_group))):I([])},[C,x,D]);let N=async()=>{if(x)try{M(!0);let{data:a}=await p.supabase.from("donations").select("*").eq("donor_id",x.id).eq("status","completed").order("created_at",{ascending:!1}),b=a?.length||0,c=a?.[0]?new Date(a[0].created_at):null;G({completedDonations:b,livesImpacted:3*b}),K(c)}catch(a){console.error("Error fetching dashboard user stats",a)}finally{M(!1)}},O=(a=F.completedDonations)>=10?{name:"Gold Donor",color:"text-yellow-600 bg-yellow-100",icon:i.Shield}:a>=5?{name:"Silver Donor",color:"text-gray-600 bg-gray-100",icon:i.Shield}:a>=1?{name:"Bronze Donor",color:"text-orange-700 bg-orange-100",icon:j.Award}:{name:"New Donor",color:"text-blue-600 bg-blue-100",icon:h.Heart},P=O.icon,Q=(()=>{let a;if(!J)return{isReady:!0,message:"You are ready to donate today!"};let b=(a=(0,r.toDate)(J),isNaN(56)?(0,s.constructFrom)(J,NaN):(a.setDate(a.getDate()+56),a)),c=new Date;if(c>=b)return{isReady:!0,message:"You are ready to donate again!"};{let a,d,e,f,g,h,i,j,k=(a=(0,r.toDate)(b),e=w(a,d=(0,r.toDate)(c)),h=Math.abs((f=u(a),g=u(d),Math.round((f-(0,v.getTimezoneOffsetInMilliseconds)(f)-(g-(0,v.getTimezoneOffsetInMilliseconds)(g)))/t.millisecondsInDay))),a.setDate(a.getDate()-e*h),i=Number(w(a,d)===-e),0==(j=e*(h-i))?0:j);return{isReady:!1,message:`Eligible in ${k} days`,nextDate:b}}})();return E||L?(0,b.jsx)(y,{}):(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Overview of your impact and matches"})]}),(0,b.jsxs)("div",{className:`flex items-center space-x-2 px-4 py-2 rounded-full ${O.color}`,children:[(0,b.jsx)(P,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"font-semibold",children:O.name})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsx)(l.Card,{className:Q.isReady?"border-l-4 border-l-success-500":"border-l-4 border-l-orange-500",children:(0,b.jsxs)(l.CardBody,{className:"flex flex-col h-full justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-700",children:"Donation Status"}),(0,b.jsx)(g.Calendar,{className:Q.isReady?"text-success-500":"text-orange-500"})]}),(0,b.jsx)("p",{className:`text-xl font-bold ${Q.isReady?"text-success-600":"text-orange-600"}`,children:Q.isReady?"Ready to Donate":"Recovery Period"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:Q.message})]}),Q.isReady&&(0,b.jsx)(d.default,{href:"/requests",className:"mt-4",children:(0,b.jsx)(m.Button,{size:"sm",variant:"outline",className:"w-full text-success-600 border-success-200 hover:bg-success-50",children:"Find a Match"})})]})}),(0,b.jsx)(l.Card,{children:(0,b.jsxs)(l.CardBody,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-700",children:"Your Impact"}),(0,b.jsx)(f.Activity,{className:"text-primary-500"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:F.livesImpacted}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Estimated lives saved"})]}),(0,b.jsxs)("div",{className:"pt-4 border-t border-gray-100 flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Donations made"}),(0,b.jsx)("span",{className:"font-medium",children:F.completedDonations})]})]})]})}),(0,b.jsx)(l.Card,{className:"bg-gradient-to-br from-primary-600 to-primary-700 text-white",children:(0,b.jsxs)(l.CardBody,{className:"flex flex-col h-full justify-between text-white",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-primary-100 mb-2",children:"Community Needs"}),(0,b.jsxs)("p",{className:"text-2xl font-bold mb-1",children:[C.length," Active Requests"]}),(0,b.jsx)("p",{className:"text-sm text-primary-100 opacity-90",children:H.length>0?(0,b.jsxs)("span",{className:"font-bold bg-white/20 px-2 py-0.5 rounded text-white",children:[H.length," Matches For You"]}):"No compatible requests right now"})]}),(0,b.jsx)(d.default,{href:"/requests/new",className:"mt-4",children:(0,b.jsx)(m.Button,{variant:"ghost",className:"w-full bg-white text-primary-700 hover:bg-gray-100",children:"Request Blood"})})]})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[(0,b.jsx)(h.Heart,{className:"h-5 w-5 mr-2 text-primary-500"}),"Recommended for You"]}),(0,b.jsx)(d.default,{href:"/requests",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"See All Requests"})]}),H.length>0?(0,b.jsx)("div",{className:"space-y-4",children:H.map(a=>(0,b.jsx)(n.BloodRequestCard,{request:a,onRespond:()=>B.push("/requests"),onPendingClick:()=>{B.push("/requests")},userBloodGroup:x?.blood_group,hasOffered:D.has(a.id),isOwnRequest:a.user_id===x?.id},a.id))}):(0,b.jsx)(z.EmptyState,{icon:k.CheckCircle,title:"All Good!",description:`There are no urgent requests matching your blood group (${x?.blood_group}) right now.`,actionLabel:"Browse All Requests",onAction:()=>B.push("/requests"),className:"bg-gray-50 border-dashed"})]})]})}a.s(["default",()=>B],64245)}];

//# sourceMappingURL=_bbff40e1._.js.map