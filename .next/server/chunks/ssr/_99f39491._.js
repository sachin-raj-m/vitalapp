module.exports=[34904,a=>{"use strict";var b=a.i(87924);a.s(["Card",0,({children:a,className:c=""})=>(0,b.jsx)("div",{className:`bg-white rounded-lg shadow-md overflow-hidden ${c}`,children:a}),"CardBody",0,({children:a,className:c=""})=>(0,b.jsx)("div",{className:`px-6 py-4 ${c}`,children:a}),"CardHeader",0,({children:a,className:c=""})=>(0,b.jsx)("div",{className:`px-6 py-4 border-b border-gray-200 ${c}`,children:a})])},61730,a=>{"use strict";var b=a.i(78560);async function c(a){try{let{data:c,error:d}=await b.supabase.from("profiles").select("full_name, blood_group, blood_group_proof_url").eq("id",a).single();if(d)throw console.error("Error fetching profile:",d),d;return!!(c&&c.full_name&&c.blood_group&&c.blood_group_proof_url)}catch(a){return console.error("Error checking registration status:",a),!1}}a.s(["isRegistrationComplete",()=>c])},99798,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(31067),g=a.i(34904),h=a.i(18180),i=a.i(12466),j=a.i(24452),k=a.i(53131),l=a.i(78560),m=a.i(61730);function n(){let a=(0,d.useRouter)(),{signIn:n,user:o}=(0,k.useAuth)(),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(async()=>{if(o)try{if(await (0,m.isRegistrationComplete)(o.id))a.push("/dashboard");else{let b={userId:o.id,email:o.email,phone:o.phone||""};localStorage.setItem("pendingRegistration",JSON.stringify(b)),a.push("/complete-registration")}}catch(c){console.error("Error in registration check");let b={userId:o.id,email:o.email,phone:o.phone||""};localStorage.setItem("pendingRegistration",JSON.stringify(b)),a.push("/complete-registration")}})()},[o,a]);let z=async a=>{a.preventDefault(),u(""),w(!0);try{await n(p,r)}catch(a){a.message.includes("Invalid login credentials")?u("Invalid email or password"):a.message.includes("Email not confirmed")?u("Please verify your email address before signing in"):u(a.message||"An error occurred during sign in"),w(!1)}},A=async()=>{y(!0),u("");try{let{error:a}=await l.supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(a)throw a}catch(a){console.error("Google sign in error"),u(a.message||"Failed to sign in with Google"),y(!1)}};return(0,b.jsx)("div",{className:"max-w-md mx-auto",children:(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-center text-gray-900",children:"Welcome Back"}),(0,b.jsx)("p",{className:"text-center text-gray-600 mt-2",children:"Sign in to continue to your account"})]}),(0,b.jsxs)(g.CardBody,{children:[t&&(0,b.jsx)(j.Alert,{variant:"error",className:"mb-4",children:t}),(0,b.jsxs)("form",{onSubmit:z,className:"space-y-4",children:[(0,b.jsx)(h.Input,{label:"Email",type:"email",value:p,onChange:a=>q(a.target.value),required:!0,autoComplete:"email"}),(0,b.jsx)(h.Input,{label:"Password",type:"password",value:r,onChange:a=>s(a.target.value),required:!0,autoComplete:"current-password"}),(0,b.jsx)(i.Button,{type:"submit",variant:"primary",className:"w-full",isLoading:v,leftIcon:(0,b.jsx)(f.LogIn,{className:"h-5 w-5"}),children:"Sign In"})]}),(0,b.jsxs)("div",{className:"relative my-6",children:[(0,b.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,b.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,b.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,b.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),(0,b.jsx)(i.Button,{type:"button",variant:"secondary",className:"w-full",onClick:A,isLoading:x,children:"Sign in with Google"}),(0,b.jsxs)("div",{className:"mt-6 text-center space-y-2",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:(0,b.jsx)(e.default,{href:"/forgot-password",className:"text-primary-500 hover:text-primary-600",children:"Forgot your password?"})}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,b.jsx)(e.default,{href:"/register",className:"text-primary-500 hover:text-primary-600",children:"Sign up"})]})]})]})]})})}a.s(["default",()=>n])}];

//# sourceMappingURL=_99f39491._.js.map