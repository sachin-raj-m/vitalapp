module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},26017,a=>{"use strict";let b=(0,a.i(70106).default)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],26017)},34904,a=>{"use strict";var b=a.i(87924);a.s(["Card",0,({children:a,className:c=""})=>(0,b.jsx)("div",{className:`bg-white rounded-lg shadow-md overflow-hidden ${c}`,children:a}),"CardBody",0,({children:a,className:c=""})=>(0,b.jsx)("div",{className:`px-6 py-4 ${c}`,children:a}),"CardHeader",0,({children:a,className:c=""})=>(0,b.jsx)("div",{className:`px-6 py-4 border-b border-gray-200 ${c}`,children:a})])},41997,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={BailoutToCSRError:function(){return g},isBailoutToCSRError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="BAILOUT_TO_CLIENT_SIDE_RENDERING";class g extends Error{constructor(a){super(`Bail out to client-side rendering: ${a}`),this.reason=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===f}},61730,a=>{"use strict";var b=a.i(78560);async function c(a){try{console.log("Checking registration completion for user:",a);let{data:c,error:d}=await b.supabase.from("profiles").select("full_name, blood_group, blood_group_proof_url").eq("id",a).single();if(d)throw console.error("Error fetching profile:",d),d;console.log("Profile data:",c);let e=!!(c&&c.full_name&&c.blood_group&&c.blood_group_proof_url);return console.log("Registration complete?",e),e}catch(a){return console.error("Error checking registration status:",a),!1}}a.s(["isRegistrationComplete",()=>c])},71500,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(53131),e=a.i(50944);function f({children:a}){let{user:f,session:g,loading:h,error:i,refreshProfile:j}=(0,d.useAuth)(),k=(0,e.useRouter)(),l=(0,e.usePathname)(),[m,n]=(0,c.useState)(0);return((0,c.useEffect)(()=>{console.log("ProtectedRoute state:",{user:f,loading:h,session:g})},[f,h,g]),(0,c.useEffect)(()=>{g?.user?.id&&!f&&!h&&m<3&&(console.log(`Profile missing despite active session, refreshing (attempt ${m+1})`),j(),n(a=>a+1))},[g,f,h,j,m]),h)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Loading..."}),(0,b.jsx)("p",{className:"text-gray-600",children:"Please wait while we prepare your dashboard."})]})}):((0,c.useEffect)(()=>{f&&g||h&&!(m>=3)||k.push(`/login?from=${l}`)},[f,g,h,m,k,l]),f&&g||h&&!(m>=3))?(console.log("ProtectedRoute: Rendering protected content"),(0,b.jsx)(b.Fragment,{children:a})):null}var g=a.i(61730),h=a.i(34904),i=a.i(26017);function j({children:a}){let f=(0,e.useRouter)(),{user:j}=(0,d.useAuth)(),[k,l]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{(async()=>{if(console.log("RegistrationGuard: Checking registration status"),!j){console.log("RegistrationGuard: No user found, redirecting to login"),f.push("/login");return}try{console.log("RegistrationGuard: Checking completion for user:",j.id);let a=await (0,g.isRegistrationComplete)(j.id);if(console.log("RegistrationGuard: Registration complete?",a),a)console.log("RegistrationGuard: Registration complete, allowing access"),l(!1);else{console.log("RegistrationGuard: Registration incomplete, redirecting to complete registration");let a={userId:j.id,email:j.email,phone:j.phone||""};console.log("RegistrationGuard: Storing pending data:",a),localStorage.setItem("pendingRegistration",JSON.stringify(a)),f.push("/complete-registration")}}catch(b){console.error("RegistrationGuard: Error checking registration:",b);let a={userId:j.id,email:j.email,phone:j.phone||""};localStorage.setItem("pendingRegistration",JSON.stringify(a)),f.push("/complete-registration")}})()},[j,f]),k)?(0,b.jsx)("div",{className:"max-w-md mx-auto",children:(0,b.jsx)(h.Card,{children:(0,b.jsxs)(h.CardBody,{className:"text-center py-8",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Checking Profile"}),(0,b.jsx)(i.Loader2,{className:"h-8 w-8 animate-spin text-primary-500 mx-auto"})]})})}):(0,b.jsx)(b.Fragment,{children:a})}function k({children:a}){return(0,b.jsx)(f,{children:(0,b.jsx)(j,{children:a})})}a.s(["default",()=>k],71500)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__72dbc00e._.js.map