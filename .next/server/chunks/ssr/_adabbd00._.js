module.exports=[34904,a=>{"use strict";var b=a.i(87924);a.s(["Card",0,({children:a,className:c=""})=>(0,b.jsx)("div",{className:`bg-white rounded-lg shadow-md overflow-hidden ${c}`,children:a}),"CardBody",0,({children:a,className:c=""})=>(0,b.jsx)("div",{className:`px-6 py-4 ${c}`,children:a}),"CardHeader",0,({children:a,className:c=""})=>(0,b.jsx)("div",{className:`px-6 py-4 border-b border-gray-200 ${c}`,children:a})])},90821,a=>{"use strict";let b=(0,a.i(70106).default)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],90821)},24452,a=>{"use strict";var b=a.i(87924),c=a.i(90821),d=a.i(70106);let e=(0,d.default)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),f=(0,d.default)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),g=(0,d.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["Alert",0,({title:a,children:d,variant:h="info",onClose:i,className:j=""})=>{let k={info:(0,b.jsx)(f,{className:"h-5 w-5 text-blue-400"}),success:(0,b.jsx)(e,{className:"h-5 w-5 text-green-400"}),warning:(0,b.jsx)(c.AlertCircle,{className:"h-5 w-5 text-yellow-400"}),error:(0,b.jsx)(c.AlertCircle,{className:"h-5 w-5 text-red-400"})},l=`
    rounded-md p-4
    ${{info:"bg-blue-50 text-blue-800",success:"bg-green-50 text-green-800",warning:"bg-yellow-50 text-yellow-800",error:"bg-red-50 text-red-800"}[h]}
    ${j}
  `;return(0,b.jsx)("div",{className:l,children:(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:k[h]}),(0,b.jsxs)("div",{className:"ml-3 flex-1",children:[a&&(0,b.jsx)("h3",{className:"text-sm font-medium",children:a}),(0,b.jsx)("div",{className:`text-sm ${a?"mt-2":""}`,children:d})]}),i&&(0,b.jsx)("div",{className:"ml-auto pl-3",children:(0,b.jsx)("div",{className:"-mx-1.5 -my-1.5",children:(0,b.jsxs)("button",{type:"button",onClick:i,className:`
                  inline-flex rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2
                  ${"info"===h?"text-blue-500 hover:bg-blue-100 focus:ring-blue-600":""}
                  ${"success"===h?"text-green-500 hover:bg-green-100 focus:ring-green-600":""}
                  ${"warning"===h?"text-yellow-500 hover:bg-yellow-100 focus:ring-yellow-600":""}
                  ${"error"===h?"text-red-500 hover:bg-red-100 focus:ring-red-600":""}
                `,children:[(0,b.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,b.jsx)(g,{className:"h-5 w-5"})]})})})]})})}],24452)},60246,a=>{"use strict";let b=(0,a.i(70106).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>b],60246)},90669,a=>{"use strict";let b=(0,a.i(70106).default)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);a.s(["Activity",()=>b],90669)},88367,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(78560),e=a.i(34904),f=a.i(12466),g=a.i(24452),h=a.i(26017),i=a.i(70106);let j=(0,i.default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var k=a.i(60246),l=a.i(90669);let m=(0,i.default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),n=(0,i.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),o=(0,i.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var p=a.i(7629),q=a.i(46271);function r(){let[a,i]=(0,c.useState)("overview"),[r,s]=(0,c.useState)({users:0,donors:0,pending:0,requests:0}),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)(!0),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)("");(0,c.useEffect)(()=>{F()},[]);let F=async()=>{y(!0);try{let[a,b]=await Promise.all([d.supabase.from("profiles").select("*").order("created_at",{ascending:!1}),d.supabase.from("blood_requests").select("*").order("created_at",{ascending:!1})]);if(a.error)throw a.error;if(b.error)throw b.error;let c=a.data||[],e=b.data||[];u(c),w(e),s({users:c.length,donors:c.filter(a=>a.is_donor).length,pending:c.filter(a=>"pending"===a.verification_status&&a.is_donor).length,requests:e.filter(a=>"active"===a.status).length})}catch(a){C(a.message)}finally{y(!1)}},G=async(a,b)=>{A(a);try{let{error:c}=await d.supabase.from("profiles").update({verification_status:b}).eq("id",a);if(c)throw c;u(c=>c.map(c=>c.id===a?{...c,verification_status:b}:c)),s(a=>({...a,pending:a.pending-1}))}catch(a){C(a.message)}finally{A(null)}},H=async(a,b)=>{if(!confirm("Are you sure you want to change this user's role?"))return;A(a);let c="admin"===b?"user":"admin";try{let{error:b}=await d.supabase.from("profiles").update({role:c}).eq("id",a);if(b)throw b;u(b=>b.map(b=>b.id===a?{...b,role:c}:b))}catch(a){C(a.message)}finally{A(null)}},I=async a=>{if(confirm("Delete this request permanently?")){A(a);try{let{error:b}=await d.supabase.from("blood_requests").delete().eq("id",a);if(b)throw b;w(b=>b.filter(b=>b.id!==a))}catch(a){C(a.message)}finally{A(null)}}},J=t.filter(a=>a.full_name?.toLowerCase().includes(D.toLowerCase())||a.email?.toLowerCase().includes(D.toLowerCase())),K=t.filter(a=>"pending"===a.verification_status&&a.is_donor);return x?(0,b.jsx)("div",{className:"flex justify-center p-8",children:(0,b.jsx)(h.Loader2,{className:"animate-spin h-8 w-8 text-red-500"})}):(0,b.jsxs)("div",{className:"space-y-8",children:[B&&(0,b.jsx)(g.Alert,{variant:"error",onClose:()=>C(""),children:B}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsx)(e.Card,{className:"bg-blue-50 border-blue-100",children:(0,b.jsxs)(e.CardBody,{className:"p-4 flex items-center space-x-4",children:[(0,b.jsx)("div",{className:"p-3 bg-blue-100 rounded-full text-blue-600",children:(0,b.jsx)(k.Users,{size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:r.users}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Total Users"})]})]})}),(0,b.jsx)(e.Card,{className:"bg-red-50 border-red-100",children:(0,b.jsxs)(e.CardBody,{className:"p-4 flex items-center space-x-4",children:[(0,b.jsx)("div",{className:"p-3 bg-red-100 rounded-full text-red-600",children:(0,b.jsx)(p.HeartPulse,{size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:r.donors}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Donors"})]})]})}),(0,b.jsx)(e.Card,{className:"bg-orange-50 border-orange-100",children:(0,b.jsxs)(e.CardBody,{className:"p-4 flex items-center space-x-4",children:[(0,b.jsx)("div",{className:"p-3 bg-orange-100 rounded-full text-orange-600",children:(0,b.jsx)(m,{size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:r.pending}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Pending Verify"})]})]})}),(0,b.jsx)(e.Card,{className:"bg-green-50 border-green-100",children:(0,b.jsxs)(e.CardBody,{className:"p-4 flex items-center space-x-4",children:[(0,b.jsx)("div",{className:"p-3 bg-green-100 rounded-full text-green-600",children:(0,b.jsx)(l.Activity,{size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:r.requests}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Active Requests"})]})]})})]}),(0,b.jsx)("div",{className:"flex space-x-1 border-b overflow-x-auto pb-1",children:["overview","users","verifications","requests"].map(c=>(0,b.jsxs)("button",{onClick:()=>i(c),className:`px-4 py-2 capitalize font-medium text-sm transition-colors relative ${a===c?"text-red-600":"text-gray-500 hover:text-gray-700"}`,children:[c,a===c&&(0,b.jsx)(q.motion.div,{layoutId:"underline",className:"absolute left-0 right-0 bottom-[-5px] h-0.5 bg-red-600"})]},c))}),(0,b.jsxs)("div",{className:"min-h-[400px]",children:["overview"===a&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Activity Stream"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Recent application activity will appear here."}),(0,b.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100 text-center text-sm text-gray-400",children:"System is running normally. No critical alerts."})]}),"users"===a&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 bg-white border border-gray-300 rounded-md px-3 py-2 w-full max-w-sm",children:[(0,b.jsx)(n,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Search users by name or email...",className:"outline-none text-sm w-full",value:D,onChange:a=>E(a.target.value)})]}),(0,b.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:J.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.full_name||"Unknown"}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.email})]}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${"admin"===a.role?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:a.role||"user"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:a.is_donor?(0,b.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${"verified"===a.verification_status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:"verified"===a.verification_status?"Verified Donor":"Pending Verified"}):(0,b.jsx)("span",{className:"text-gray-400 text-xs",children:"Recipient"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,b.jsx)(f.Button,{size:"sm",variant:"ghost",className:"text-blue-600 hover:text-blue-900",isLoading:z===a.id,onClick:()=>H(a.id,a.role||"user"),children:"admin"===a.role?"Demote to User":"Promote to Admin"})})]},a.id))})]})})]}),"verifications"===a&&(0,b.jsx)("div",{className:"space-y-4",children:0===K.length?(0,b.jsx)("div",{className:"text-center py-10 text-gray-500 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:"No pending verifications. All caught up!"}):K.map(a=>(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardBody,{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-bold",children:a.full_name}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["Blood Group: ",(0,b.jsx)("span",{className:"font-bold text-red-600",children:a.blood_group})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[a.blood_group_proof_url&&(0,b.jsxs)("a",{href:(a=>{if(!a)return"";let{data:b}=d.supabase.storage.from("proofs").getPublicUrl(a);return b.publicUrl})(a.blood_group_proof_url),target:"_blank",className:"flex items-center text-blue-600 text-sm hover:underline px-3",children:["View Proof ",(0,b.jsx)(j,{className:"ml-1 w-3 h-3"})]}),(0,b.jsx)(f.Button,{variant:"secondary",size:"sm",onClick:()=>G(a.id,"rejected"),isLoading:z===a.id,children:"Reject"}),(0,b.jsx)(f.Button,{variant:"success",size:"sm",onClick:()=>G(a.id,"verified"),isLoading:z===a.id,children:"Approve"})]})]})},a.id))}),"requests"===a&&(0,b.jsx)("div",{className:"overflow-x-auto border rounded-lg",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Hospital"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Blood Group"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:a.hospital_name}),(0,b.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900",children:[a.blood_group," (",a.units_needed," units) ",(0,b.jsx)("span",{className:"text-xs text-red-500 border border-red-200 px-1 rounded",children:a.urgency_level})]}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,b.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${"active"===a.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:a.status})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(a.created_at).toLocaleDateString()}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,b.jsx)("button",{onClick:()=>I(a.id),className:"text-red-500 hover:text-red-700",children:(0,b.jsx)(o,{className:"w-4 h-4"})})})]},a.id))})]})})]})]})}a.s(["default",()=>r],88367)}];

//# sourceMappingURL=_adabbd00._.js.map