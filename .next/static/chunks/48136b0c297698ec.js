(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5050,e=>{"use strict";var t=e.i(43476);e.s(["Card",0,({children:e,className:a=""})=>(0,t.jsx)("div",{className:`bg-white rounded-lg shadow-md overflow-hidden ${a}`,children:e}),"CardBody",0,({children:e,className:a=""})=>(0,t.jsx)("div",{className:`px-6 py-4 ${a}`,children:e}),"CardHeader",0,({children:e,className:a=""})=>(0,t.jsx)("div",{className:`px-6 py-4 border-b border-gray-200 ${a}`,children:e})])},46897,e=>{"use strict";let t=(0,e.i(75254).default)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},67585,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"BailoutToCSR",{enumerable:!0,get:function(){return n}});let l=e.r(32061);function n({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new l.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},9885,(e,t,a)=>{"use strict";function l(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"encodeURIPath",{enumerable:!0,get:function(){return l}})},52157,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"PreloadChunks",{enumerable:!0,get:function(){return i}});let l=e.r(43476),n=e.r(74080),r=e.r(63599),o=e.r(9885);function i({moduleIds:e}){if("undefined"!=typeof window)return null;let t=r.workAsyncStorage.getStore();if(void 0===t)return null;let a=[];if(t.reactLoadableManifest&&e){let l=t.reactLoadableManifest;for(let t of e){if(!l[t])continue;let e=l[t].files;a.push(...e)}}return 0===a.length?null:(0,l.jsx)(l.Fragment,{children:a.map(e=>{let a=`${t.assetPrefix}/_next/${(0,o.encodeURIPath)(e)}`;return e.endsWith(".css")?(0,l.jsx)("link",{precedence:"dynamic",href:a,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,n.preload)(a,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},69093,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return d}});let l=e.r(43476),n=e.r(71645),r=e.r(67585),o=e.r(52157);function i(e){return{default:e&&"default"in e?e.default:e}}let s={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},d=function(e){let t={...s,...e},a=(0,n.lazy)(()=>t.loader().then(i)),d=t.loading;function u(e){let i=d?(0,l.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,s=!t.ssr||!!t.loading,u=s?n.Suspense:n.Fragment,c=t.ssr?(0,l.jsxs)(l.Fragment,{children:["undefined"==typeof window?(0,l.jsx)(o.PreloadChunks,{moduleIds:t.modules}):null,(0,l.jsx)(a,{...e})]}):(0,l.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,l.jsx)(a,{...e})});return(0,l.jsx)(u,{...s?{fallback:i}:{},children:c})}return u.displayName="LoadableComponent",u}},70703,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return n}});let l=e.r(55682)._(e.r(69093));function n(e,t){let a={};"function"==typeof e&&(a.loader=e);let n={...a,...t};return(0,l.default)({...n,modules:n.loadableGenerated?.modules})}("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},95585,e=>{"use strict";var t=e.i(43476),a=e.i(71645),l=e.i(18566),n=e.i(46897),r=e.i(98791),o=e.i(5050),i=e.i(1206),s=e.i(76525),d=e.i(78896),u=e.i(97815),c=e.i(17927);let p=(0,e.i(70703).default)(()=>e.A(9585),{loadableGenerated:{modules:[5481]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"h-[400px] w-full bg-gray-100 animate-pulse flex items-center justify-center rounded-lg",children:(0,t.jsx)("span",{className:"text-gray-400",children:"Loading Map..."})})});function h(){let e=(0,l.useRouter)(),{user:h,loading:g}=(0,u.useAuth)(),[m,f]=(0,a.useState)(!1),[b,v]=(0,a.useState)("");if((0,a.useEffect)(()=>{g||h||e.push("/login?redirect=/requests/new")},[h,g,e]),g||!h)return(0,t.jsx)("div",{className:"flex justify-center items-center min-h-[50vh]",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});let[x,y]=(0,a.useState)({bloodGroup:"",unitsNeeded:1,dateNeeded:"",hospitalName:"",hospitalAddress:"",urgencyLevel:"",notes:"",contactName:h?.full_name||"",contactPhone:h?.phone||"",location:{latitude:0,longitude:0,address:""},city:"",zipcode:""}),j=async t=>{if(t.preventDefault(),h){f(!0),v("");try{let{error:t}=await c.supabase.from("blood_requests").insert({user_id:h.id,blood_group:x.bloodGroup,units_needed:x.unitsNeeded,date_needed:x.dateNeeded,hospital_name:x.hospitalName,hospital_address:x.hospitalAddress,urgency_level:x.urgencyLevel,notes:x.notes,contact_name:x.contactName,contact_phone:x.contactPhone,location:x.location,city:x.city,zipcode:x.zipcode,status:"active"});if(t)throw t;e.push("/requests")}catch(e){v(e.message||"Failed to create request")}finally{f(!1)}}};return(0,t.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,t.jsxs)(o.Card,{children:[(0,t.jsxs)(o.CardHeader,{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Blood Request"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Fill in the details to create a new blood request"})]}),(0,t.jsxs)(o.CardBody,{children:[b&&(0,t.jsx)(d.Alert,{variant:"error",className:"mb-4",children:b}),(0,t.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsx)(i.Select,{label:"Blood Group",value:x.bloodGroup,onChange:e=>y({...x,bloodGroup:e.target.value}),options:[{value:"",label:"Select Blood Group"},{value:"A+",label:"A+"},{value:"A-",label:"A-"},{value:"B+",label:"B+"},{value:"B-",label:"B-"},{value:"AB+",label:"AB+"},{value:"AB-",label:"AB-"},{value:"O+",label:"O+"},{value:"O-",label:"O-"}],required:!0}),(0,t.jsx)(i.Input,{type:"number",label:"Units Needed",min:1,value:x.unitsNeeded,onChange:e=>y({...x,unitsNeeded:parseInt(e.target.value)}),required:!0}),(0,t.jsx)(i.Input,{type:"date",label:"Date Needed",value:x.dateNeeded,min:new Date().toISOString().split("T")[0],onChange:e=>y({...x,dateNeeded:e.target.value}),required:!0})]}),(0,t.jsx)(i.Input,{label:"Hospital Name",value:x.hospitalName,onChange:e=>y({...x,hospitalName:e.target.value}),required:!0}),(0,t.jsx)(i.Input,{label:"Hospital Address",value:x.hospitalAddress,onChange:e=>y({...x,hospitalAddress:e.target.value}),required:!0}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsx)(i.Input,{label:"City",value:x.city,onChange:e=>y({...x,city:e.target.value}),required:!0,placeholder:"e.g. Bangalore"}),(0,t.jsx)(i.Input,{label:"Zip Code",value:x.zipcode,onChange:e=>y({...x,zipcode:e.target.value}),required:!0,placeholder:"e.g. 560001"})]}),(0,t.jsx)(i.Select,{label:"Urgency Level",value:x.urgencyLevel,onChange:e=>y({...x,urgencyLevel:e.target.value}),options:[{value:"",label:"Select Urgency Level"},{value:"High",label:"High"},{value:"Medium",label:"Medium"},{value:"Low",label:"Low"}],required:!0}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Location Selection (Click on map)"}),(0,t.jsx)("div",{className:"h-[400px] border border-gray-300 rounded-lg overflow-hidden relative z-0",children:(0,t.jsx)(p,{interactive:!0,center:{lat:20.5937,lng:78.9629},zoom:5,selectedPosition:x.location.latitude?{lat:x.location.latitude,lng:x.location.longitude}:null,markers:[],onLocationSelect:e=>{y(t=>({...t,location:{...t.location,latitude:e.lat,longitude:e.lng}}))}})}),(0,t.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,t.jsx)(s.Button,{type:"button",variant:"secondary",onClick:()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{y(t=>({...t,location:{...t.location,latitude:e.coords.latitude,longitude:e.coords.longitude}}))},e=>{console.error("Error getting location")})},leftIcon:(0,t.jsx)(n.MapPin,{className:"h-5 w-5"}),children:"Use My Current Location"}),0!==x.location.latitude&&(0,t.jsxs)("span",{className:"text-sm text-green-600 flex items-center",children:[(0,t.jsx)(n.MapPin,{className:"h-4 w-4 mr-1"}),"Lat: ",x.location.latitude.toFixed(4),", Lng: ",x.location.longitude.toFixed(4)]})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsx)(i.Input,{label:"Contact Name",value:x.contactName,onChange:e=>y({...x,contactName:e.target.value}),required:!0}),(0,t.jsx)(i.Input,{label:"Contact Phone",value:x.contactPhone,onChange:e=>y({...x,contactPhone:e.target.value}),required:!0})]}),(0,t.jsx)(i.Textarea,{label:"Additional Notes",value:x.notes,onChange:e=>y({...x,notes:e.target.value}),placeholder:"Any additional information that might be helpful..."}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,t.jsx)(s.Button,{type:"button",variant:"ghost",onClick:()=>e.push("/requests"),children:"Cancel"}),(0,t.jsx)(s.Button,{type:"submit",variant:"primary",isLoading:m,leftIcon:(0,t.jsx)(r.AlertCircle,{className:"h-5 w-5"}),children:"Create Request"})]})]})]})]})})}e.s(["default",()=>h])},9585,e=>{e.v(t=>Promise.all(["static/chunks/81308917bb7a5a99.js","static/chunks/076efda0d0cae75b.css"].map(t=>e.l(t))).then(()=>t(5481)))}]);