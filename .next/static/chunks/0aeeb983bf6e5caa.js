(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5050,e=>{"use strict";var r=e.i(43476);e.s(["Card",0,({children:e,className:t=""})=>(0,r.jsx)("div",{className:`bg-white rounded-lg shadow-md overflow-hidden ${t}`,children:e}),"CardBody",0,({children:e,className:t=""})=>(0,r.jsx)("div",{className:`px-6 py-4 ${t}`,children:e}),"CardHeader",0,({children:e,className:t=""})=>(0,r.jsx)("div",{className:`px-6 py-4 border-b border-gray-200 ${t}`,children:e})])},36271,e=>{"use strict";var r=e.i(17927);async function t(e){try{let{data:t,error:s}=await r.supabase.from("profiles").select("full_name, blood_group, blood_group_proof_url").eq("id",e).single();if(s)throw console.error("Error fetching profile:",s),s;return!!(t&&t.full_name&&t.blood_group&&t.blood_group_proof_url)}catch(e){return console.error("Error checking registration status:",e),!1}}e.s(["isRegistrationComplete",()=>t])},76651,e=>{"use strict";var r=e.i(43476),t=e.i(71645),s=e.i(18566),a=e.i(22016),i=e.i(4997),o=e.i(5050),l=e.i(1206),n=e.i(76525),c=e.i(78896),d=e.i(97815),u=e.i(17927),m=e.i(36271);function g(){let e=(0,s.useRouter)(),{signIn:g,user:h}=(0,d.useAuth)(),[p,x]=(0,t.useState)(""),[y,f]=(0,t.useState)(""),[v,j]=(0,t.useState)(""),[b,w]=(0,t.useState)(!1),[N,C]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{if(h)try{if(await (0,m.isRegistrationComplete)(h.id))e.push("/dashboard");else{let r={userId:h.id,email:h.email,phone:h.phone||""};localStorage.setItem("pendingRegistration",JSON.stringify(r)),e.push("/complete-registration")}}catch(t){console.error("Error in registration check");let r={userId:h.id,email:h.email,phone:h.phone||""};localStorage.setItem("pendingRegistration",JSON.stringify(r)),e.push("/complete-registration")}})()},[h,e]);let S=async e=>{e.preventDefault(),j(""),w(!0);try{await g(p,y)}catch(e){e.message.includes("Invalid login credentials")?j("Invalid email or password"):e.message.includes("Email not confirmed")?j("Please verify your email address before signing in"):j(e.message||"An error occurred during sign in"),w(!1)}},I=async()=>{C(!0),j("");try{let{error:e}=await u.supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(e)throw e}catch(e){console.error("Google sign in error"),j(e.message||"Failed to sign in with Google"),C(!1)}};return(0,r.jsx)("div",{className:"max-w-md mx-auto",children:(0,r.jsxs)(o.Card,{children:[(0,r.jsxs)(o.CardHeader,{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-center text-gray-900",children:"Welcome Back"}),(0,r.jsx)("p",{className:"text-center text-gray-600 mt-2",children:"Sign in to continue to your account"})]}),(0,r.jsxs)(o.CardBody,{children:[v&&(0,r.jsx)(c.Alert,{variant:"error",className:"mb-4",children:v}),(0,r.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,r.jsx)(l.Input,{label:"Email",type:"email",value:p,onChange:e=>x(e.target.value),required:!0,autoComplete:"email"}),(0,r.jsx)(l.Input,{label:"Password",type:"password",value:y,onChange:e=>f(e.target.value),required:!0,autoComplete:"current-password"}),(0,r.jsx)(n.Button,{type:"submit",variant:"primary",className:"w-full",isLoading:b,leftIcon:(0,r.jsx)(i.LogIn,{className:"h-5 w-5"}),children:"Sign In"})]}),(0,r.jsxs)("div",{className:"relative my-6",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),(0,r.jsx)(n.Button,{type:"button",variant:"secondary",className:"w-full",onClick:I,isLoading:N,children:"Sign in with Google"}),(0,r.jsxs)("div",{className:"mt-6 text-center space-y-2",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:(0,r.jsx)(a.default,{href:"/forgot-password",className:"text-primary-500 hover:text-primary-600",children:"Forgot your password?"})}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,r.jsx)(a.default,{href:"/register",className:"text-primary-500 hover:text-primary-600",children:"Sign up"})]})]})]})]})})}e.s(["default",()=>g])}]);