(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5050,e=>{"use strict";var r=e.i(43476);e.s(["Card",0,({children:e,className:s=""})=>(0,r.jsx)("div",{className:`bg-white rounded-lg shadow-md overflow-hidden ${s}`,children:e}),"CardBody",0,({children:e,className:s=""})=>(0,r.jsx)("div",{className:`px-6 py-4 ${s}`,children:e}),"CardHeader",0,({children:e,className:s=""})=>(0,r.jsx)("div",{className:`px-6 py-4 border-b border-gray-200 ${s}`,children:e})])},78896,98791,e=>{"use strict";var r=e.i(43476);let s=(0,e.i(75254).default)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>s],98791);var t=e.i(5631),a=e.i(52571),l=e.i(37727);e.s(["Alert",0,({title:e,children:i,variant:o="info",onClose:n,className:c=""})=>{let d={info:(0,r.jsx)(a.Info,{className:"h-5 w-5 text-blue-400"}),success:(0,r.jsx)(t.CheckCircle,{className:"h-5 w-5 text-green-400"}),warning:(0,r.jsx)(s,{className:"h-5 w-5 text-yellow-400"}),error:(0,r.jsx)(s,{className:"h-5 w-5 text-red-400"})},m=`
    rounded-md p-4
    ${{info:"bg-blue-50 text-blue-800",success:"bg-green-50 text-green-800",warning:"bg-yellow-50 text-yellow-800",error:"bg-red-50 text-red-800"}[o]}
    ${c}
  `;return(0,r.jsx)("div",{className:m,children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:d[o]}),(0,r.jsxs)("div",{className:"ml-3 flex-1",children:[e&&(0,r.jsx)("h3",{className:"text-sm font-medium",children:e}),(0,r.jsx)("div",{className:`text-sm ${e?"mt-2":""}`,children:i})]}),n&&(0,r.jsx)("div",{className:"ml-auto pl-3",children:(0,r.jsx)("div",{className:"-mx-1.5 -my-1.5",children:(0,r.jsxs)("button",{type:"button",onClick:n,className:`
                  inline-flex rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2
                  ${"info"===o?"text-blue-500 hover:bg-blue-100 focus:ring-blue-600":""}
                  ${"success"===o?"text-green-500 hover:bg-green-100 focus:ring-green-600":""}
                  ${"warning"===o?"text-yellow-500 hover:bg-yellow-100 focus:ring-yellow-600":""}
                  ${"error"===o?"text-red-500 hover:bg-red-100 focus:ring-red-600":""}
                `,children:[(0,r.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,r.jsx)(l.X,{className:"h-5 w-5"})]})})})]})})}],78896)},1206,e=>{"use strict";var r=e.i(43476);e.s(["Input",0,({label:e,error:s,helperText:t,className:a="",...l})=>{let i=l.id||l.name||Math.random().toString(36).substring(2,9);return(0,r.jsxs)("div",{className:"mb-4",children:[e&&(0,r.jsx)("label",{htmlFor:i,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),(0,r.jsx)("input",{id:i,className:`
          w-full px-3 py-2 border rounded-md shadow-sm placeholder-gray-400 
          focus:outline-none focus:ring-2 
          ${s?"border-error-300 focus:border-error-500 focus:ring-error-500":"border-gray-300 focus:border-secondary-500 focus:ring-secondary-500"}
          ${a}
        `,...l}),s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-error-500",children:s}),t&&!s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:t})]})},"Select",0,({label:e,error:s,helperText:t,options:a,className:l="",...i})=>{let o=i.id||i.name||Math.random().toString(36).substring(2,9);return(0,r.jsxs)("div",{className:"mb-4",children:[e&&(0,r.jsx)("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),(0,r.jsx)("select",{id:o,className:`
          w-full px-3 py-2 border rounded-md shadow-sm placeholder-gray-400 
          focus:outline-none focus:ring-2 
          ${s?"border-error-300 focus:border-error-500 focus:ring-error-500":"border-gray-300 focus:border-secondary-500 focus:ring-secondary-500"}
          ${l}
        `,...i,children:a.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-error-500",children:s}),t&&!s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:t})]})},"Textarea",0,({label:e,error:s,helperText:t,className:a="",...l})=>{let i=l.id||l.name||Math.random().toString(36).substring(2,9);return(0,r.jsxs)("div",{className:"mb-4",children:[e&&(0,r.jsx)("label",{htmlFor:i,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),(0,r.jsx)("textarea",{id:i,className:`
          w-full px-3 py-2 border rounded-md shadow-sm placeholder-gray-400 
          focus:outline-none focus:ring-2 
          ${s?"border-error-300 focus:border-error-500 focus:ring-error-500":"border-gray-300 focus:border-secondary-500 focus:ring-secondary-500"}
          ${a}
        `,...l}),s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-error-500",children:s}),t&&!s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:t})]})}])},36271,e=>{"use strict";var r=e.i(17927);async function s(e){try{let{data:s,error:t}=await r.supabase.from("profiles").select("full_name, blood_group, blood_group_proof_url").eq("id",e).single();if(t)throw console.error("Error fetching profile:",t),t;return!!(s&&s.full_name&&s.blood_group&&s.blood_group_proof_url)}catch(e){return console.error("Error checking registration status:",e),!1}}e.s(["isRegistrationComplete",()=>s])},76651,e=>{"use strict";var r=e.i(43476),s=e.i(71645),t=e.i(18566),a=e.i(22016),l=e.i(4997),i=e.i(5050),o=e.i(1206),n=e.i(76525),c=e.i(78896),d=e.i(97815),m=e.i(17927),u=e.i(36271);function x(){let e=(0,t.useRouter)(),{signIn:x,user:g}=(0,d.useAuth)(),[h,p]=(0,s.useState)(""),[f,y]=(0,s.useState)(""),[b,j]=(0,s.useState)(""),[N,v]=(0,s.useState)(!1),[w,C]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{if(g)try{if(await (0,u.isRegistrationComplete)(g.id))e.push("/dashboard");else{let r={userId:g.id,email:g.email,phone:g.phone||""};localStorage.setItem("pendingRegistration",JSON.stringify(r)),e.push("/complete-registration")}}catch(s){console.error("Error in registration check");let r={userId:g.id,email:g.email,phone:g.phone||""};localStorage.setItem("pendingRegistration",JSON.stringify(r)),e.push("/complete-registration")}})()},[g,e]);let S=async e=>{e.preventDefault(),j(""),v(!0);try{await x(h,f)}catch(e){e.message.includes("Invalid login credentials")?j("Invalid email or password"):e.message.includes("Email not confirmed")?j("Please verify your email address before signing in"):j(e.message||"An error occurred during sign in"),v(!1)}},$=async()=>{C(!0),j("");try{let{error:e}=await m.supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(e)throw e}catch(e){console.error("Google sign in error"),j(e.message||"Failed to sign in with Google"),C(!1)}};return(0,r.jsx)("div",{className:"max-w-md mx-auto",children:(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-center text-gray-900",children:"Welcome Back"}),(0,r.jsx)("p",{className:"text-center text-gray-600 mt-2",children:"Sign in to continue to your account"})]}),(0,r.jsxs)(i.CardBody,{children:[b&&(0,r.jsx)(c.Alert,{variant:"error",className:"mb-4",children:b}),(0,r.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,r.jsx)(o.Input,{label:"Email",type:"email",value:h,onChange:e=>p(e.target.value),required:!0,autoComplete:"email"}),(0,r.jsx)(o.Input,{label:"Password",type:"password",value:f,onChange:e=>y(e.target.value),required:!0,autoComplete:"current-password"}),(0,r.jsx)(n.Button,{type:"submit",variant:"primary",className:"w-full",isLoading:N,leftIcon:(0,r.jsx)(l.LogIn,{className:"h-5 w-5"}),children:"Sign In"})]}),(0,r.jsxs)("div",{className:"relative my-6",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),(0,r.jsx)(n.Button,{type:"button",variant:"secondary",className:"w-full",onClick:$,isLoading:w,children:"Sign in with Google"}),(0,r.jsxs)("div",{className:"mt-6 text-center space-y-2",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:(0,r.jsx)(a.default,{href:"/forgot-password",className:"text-primary-500 hover:text-primary-600",children:"Forgot your password?"})}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,r.jsx)(a.default,{href:"/register",className:"text-primary-500 hover:text-primary-600",children:"Sign up"})]})]})]})]})})}e.s(["default",()=>x])}]);