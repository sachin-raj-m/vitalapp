{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sachinrajm/sachinraj/Projects/vitalapp/lib/supabase.ts"],"sourcesContent":["// lib/supabase.js\nimport { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n  auth: {\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true // Important for OAuth returns\n  }\n});"],"names":[],"mappings":"AAAA,kBAAkB;;;;;AAGE;AAFpB;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,0MAAY,EAAC,aAAa,iBAAiB;IACjE,MAAM;QACJ,kBAAkB;QAClB,gBAAgB;QAChB,oBAAoB,KAAK,8BAA8B;IACzD;AACF"}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/sachinrajm/sachinraj/Projects/vitalapp/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useEffect, useState, useRef } from 'react';\nimport { supabase } from '../lib/supabase';\nimport type { User } from '../types';\n\ninterface AuthState {\n  user: User | null;\n  session: any | null;\n  loading: boolean;\n  error: Error | null;\n}\n\ninterface AuthContextType extends AuthState {\n  signIn: (email: string, password: string) => Promise<void>;\n  signUp: (email: string, password: string, userData: Partial<User>) => Promise<void>;\n  signOut: () => Promise<void>;\n  updateProfile: (data: Partial<User>) => Promise<void>;\n  signInWithGoogle: () => Promise<void>;\n  refreshProfile: () => Promise<void>;\n  forceResetAuth: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\n// Helper function to cache profile in localStorage\nconst cacheUserProfile = (profile: User) => {\n  try {\n    localStorage.setItem('vital_user_profile', JSON.stringify(profile));\n  } catch (err) {\n    console.warn('Failed to cache profile in localStorage:', err);\n  }\n};\n\n// Helper function to get cached profile\nconst getCachedUserProfile = (userId: string): User | null => {\n  try {\n    const cachedProfile = localStorage.getItem('vital_user_profile');\n    if (cachedProfile) {\n      const parsedProfile = JSON.parse(cachedProfile);\n      if (parsedProfile.id === userId) {\n        return parsedProfile as User;\n      }\n    }\n  } catch (err) {\n    console.warn('Failed to read cached profile:', err);\n  }\n  return null;\n};\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [state, setState] = useState<AuthState>({\n    user: null,\n    session: null,\n    loading: true,\n    error: null,\n  });\n\n  // Use refs to prevent infinite loops\n  const isInitialized = useRef(false);\n  const isRefreshing = useRef(false);\n  const lastProfileFetch = useRef<number>(0);\n\n  const fetchUserProfile = async (userId: string) => {\n    // Prevent duplicate fetches within 2 seconds\n    const now = Date.now();\n    if (now - lastProfileFetch.current < 2000) {\n      console.log('Skipping duplicate profile fetch (throttled)');\n      return state.user;\n    }\n\n    if (isRefreshing.current) {\n      console.log('Profile fetch already in progress, skipping');\n      return state.user;\n    }\n\n    isRefreshing.current = true;\n    lastProfileFetch.current = now;\n\n    try {\n      console.log('Fetching user profile for:', userId);\n      setState(prev => ({ ...prev, loading: true }));\n\n      const { data, error } = await supabase\n        .from('profiles')\n        .select('*')\n        .eq('id', userId)\n        .maybeSingle();\n\n      if (error) {\n        console.error('Error fetching profile:', error);\n        setState(prev => ({ ...prev, loading: false, error: error as Error }));\n        throw error;\n      }\n\n      if (data) {\n        console.log('User profile fetched successfully:', data);\n\n        // Cache the profile in localStorage\n        cacheUserProfile(data as User);\n\n        // Set user immediately\n        setState(prev => ({\n          ...prev,\n          user: data as User,\n          loading: false,\n          error: null\n        }));\n\n        return data as User;\n      } else {\n        console.log('No profile found, creating new profile');\n\n        // Get user data from auth\n        const { data: { user: authUser } } = await supabase.auth.getUser();\n\n        if (!authUser) {\n          throw new Error('No auth user found');\n        }\n\n        console.log('Creating profile with auth data:', authUser);\n\n        // Create a new profile\n        const { data: newProfile, error: createError } = await supabase\n          .from('profiles')\n          .insert({\n            id: userId,\n            email: authUser?.email,\n            full_name: authUser?.user_metadata?.full_name || authUser?.email?.split('@')[0],\n            is_donor: false,\n            is_available: false,\n          })\n          .select()\n          .single();\n\n        if (createError) {\n          console.error('Error creating profile:', createError);\n\n          // Check for duplicate key error (profile might have been created in another tab/request)\n          if (createError.code === '23505') {\n            console.log('Profile already exists, fetching it instead');\n            const { data: existingProfile } = await supabase\n              .from('profiles')\n              .select('*')\n              .eq('id', userId)\n              .single();\n\n            if (existingProfile) {\n              cacheUserProfile(existingProfile as User);\n              setState(prev => ({\n                ...prev,\n                user: existingProfile as User,\n                loading: false,\n                error: null\n              }));\n              return existingProfile as User;\n            }\n          }\n\n          setState(prev => ({ ...prev, loading: false, error: createError as Error }));\n          throw createError;\n        }\n\n        console.log('New profile created:', newProfile);\n        cacheUserProfile(newProfile as User);\n        setState(prev => ({\n          ...prev,\n          user: newProfile as User,\n          loading: false,\n          error: null\n        }));\n\n        return newProfile as User;\n      }\n    } catch (error) {\n      console.error('Error in fetchUserProfile:', error);\n      setState(prev => ({\n        ...prev,\n        loading: false,\n        error: error as Error\n      }));\n      throw error;\n    } finally {\n      isRefreshing.current = false;\n    }\n  };\n\n  // Add this function to force reset auth state\n  const forceResetAuth = async () => {\n    try {\n      // Clear all auth state\n      localStorage.removeItem('vital_user_profile');\n      localStorage.removeItem('vital_supabase_auth');\n\n      // Sign out from supabase\n      await supabase.auth.signOut({ scope: 'global' });\n\n      // Reset state\n      setState({\n        user: null,\n        session: null,\n        loading: false,\n        error: null,\n      });\n    } catch (error) {\n      console.error('Error in force reset:', error);\n      setState({\n        user: null,\n        session: null,\n        loading: false,\n        error: error as Error,\n      });\n    }\n  };\n\n  // Add this state monitoring useEffect\n  useEffect(() => {\n    // Skip recovery during initialization\n    if (!isInitialized.current) return;\n\n    // Only attempt recovery if we have a session but no user\n    if (state.session?.user?.id && !state.user && !state.loading && !isRefreshing.current) {\n      console.warn('Inconsistent state: Session exists but no user profile');\n\n      // Try to recover from localStorage first\n      const userId = state.session.user.id;\n      const cachedProfile = getCachedUserProfile(userId);\n\n      if (cachedProfile) {\n        console.log('Recovered profile from cache:', cachedProfile);\n        setState(prev => ({ ...prev, user: cachedProfile }));\n      } else {\n        // Only refresh if not already refreshing\n        console.log('No cached profile, refreshing from DB');\n        refreshProfile().catch(err => {\n          console.error('Recovery attempt failed:', err);\n        });\n      }\n    }\n  }, [state.session, state.user, state.loading]);\n\n  useEffect(() => {\n    // Initialize auth\n    const initializeAuth = async () => {\n      try {\n        console.log('Initializing auth...');\n        const { data: { session } } = await supabase.auth.getSession();\n        console.log('Initial session check:', session);\n\n        // Set session immediately\n        setState(prev => ({ ...prev, session }));\n\n        if (session?.user?.id) {\n          console.log('Found session user, fetching profile:', session.user.id);\n\n          // Try cached profile first for immediate display\n          const cachedProfile = getCachedUserProfile(session.user.id);\n          if (cachedProfile) {\n            console.log('Using cached profile:', cachedProfile);\n            setState(prev => ({\n              ...prev,\n              user: cachedProfile,\n              loading: false\n            }));\n          }\n\n          // Still fetch fresh profile from DB\n          try {\n            await fetchUserProfile(session.user.id);\n          } catch (err) {\n            console.error('Error fetching profile during init:', err);\n            // Don't set loading=false again if we already set it with cached profile\n            if (!cachedProfile) {\n              setState(prev => ({ ...prev, loading: false }));\n            }\n          }\n        } else {\n          console.log('No session found');\n          setState(prev => ({ ...prev, loading: false }));\n        }\n\n        // Mark initialization as complete\n        isInitialized.current = true;\n      } catch (error) {\n        console.error('Error initializing auth:', error);\n        setState(prev => ({\n          ...prev,\n          loading: false,\n          error: error as Error\n        }));\n        isInitialized.current = true;\n      }\n    };\n\n    // Run initialization\n    initializeAuth();\n\n    // Listen for auth changes with improved error handling\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\n      async (event, session) => {\n        try {\n          console.log('Auth state changed:', event, session);\n\n          // Update session state immediately\n          setState(prev => ({ ...prev, session }));\n\n          if (event === 'SIGNED_IN' && session?.user?.id) {\n            console.log('User signed in:', session.user);\n\n            // Try cached profile first for immediate display\n            const cachedProfile = getCachedUserProfile(session.user.id);\n            if (cachedProfile) {\n              console.log('Using cached profile after sign in:', cachedProfile);\n              setState(prev => ({\n                ...prev,\n                user: cachedProfile\n              }));\n            }\n\n            // Wait a moment before fetching profile to avoid race conditions\n            setTimeout(async () => {\n              try {\n                await fetchUserProfile(session.user.id);\n              } catch (err) {\n                console.error('Error fetching profile after sign in:', err);\n                setState(prev => ({ ...prev, loading: false }));\n              }\n            }, 500);\n          } else if (event === 'SIGNED_OUT') {\n            console.log('User signed out');\n            localStorage.removeItem('vital_user_profile');\n            setState(prev => ({ ...prev, user: null, loading: false }));\n          } else if (event === 'TOKEN_REFRESHED' && session?.user?.id) {\n            console.log('Token refreshed');\n            // Only fetch profile if we don't have one and not already loading\n            if (!state.user && !state.loading && !isRefreshing.current) {\n              try {\n                await fetchUserProfile(session.user.id);\n              } catch (err) {\n                console.error('Error fetching profile after token refresh:', err);\n                setState(prev => ({ ...prev, loading: false }));\n              }\n            }\n          }\n        } catch (err) {\n          console.error('Error handling auth state change:', err);\n          setState(prev => ({ ...prev, loading: false }));\n        }\n      }\n    );\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, []);\n\n  const signIn = async (email: string, password: string) => {\n    try {\n      console.log('Starting sign in...');\n      setState(prev => ({ ...prev, loading: true, error: null }));\n      const { data, error } = await supabase.auth.signInWithPassword({ email, password });\n      console.log('Sign in response:', { data, error });\n      if (error) throw error;\n    } catch (error) {\n      console.error('Sign in error:', error);\n      setState(prev => ({ ...prev, error: error as Error, loading: false }));\n      throw error;\n    }\n  };\n\n  const signInWithGoogle = async () => {\n    try {\n      console.log('Starting Google sign in...');\n      setState(prev => ({ ...prev, loading: true, error: null }));\n\n      const { data, error } = await supabase.auth.signInWithOAuth({\n        provider: 'google',\n        options: {\n          redirectTo: `${window.location.origin}/auth/callback`,\n        },\n      });\n\n      console.log('Google sign in response:', { data, error });\n      if (error) throw error;\n    } catch (error) {\n      console.error('Google sign in error:', error);\n      setState(prev => ({ ...prev, error: error as Error, loading: false }));\n      throw error;\n    }\n  };\n\n  const signUp = async (email: string, password: string, userData: Partial<User>) => {\n    try {\n      setState(prev => ({ ...prev, loading: true, error: null }));\n\n      // Create auth user\n      const { data, error } = await supabase.auth.signUp({\n        email,\n        password,\n        options: {\n          data: {\n            full_name: userData.full_name,\n          }\n        }\n      });\n\n      if (error) throw error;\n\n      if (data.user) {\n        // Create profile record\n        const { error: profileError } = await supabase\n          .from('profiles')\n          .insert({\n            id: data.user.id,\n            email,\n            full_name: userData.full_name,\n            phone: userData.phone,\n            blood_group: userData.blood_group,\n            location: userData.location,\n            is_donor: userData.is_donor || false,\n            is_available: userData.is_available || false,\n          });\n\n        if (profileError) throw profileError;\n      }\n    } catch (error) {\n      setState(prev => ({ ...prev, error: error as Error, loading: false }));\n      throw error;\n    }\n  };\n\n  const signOut = async () => {\n    try {\n      setState(prev => ({ ...prev, loading: true }));\n      const { error } = await supabase.auth.signOut();\n      if (error) throw error;\n      localStorage.removeItem('vital_user_profile');\n    } catch (error) {\n      setState(prev => ({ ...prev, error: error as Error, loading: false }));\n      throw error;\n    }\n  };\n\n  const updateProfile = async (data: Partial<User>) => {\n    try {\n      if (!state.user?.id) throw new Error('No user logged in');\n\n      setState(prev => ({ ...prev, loading: true }));\n\n      const { error } = await supabase\n        .from('profiles')\n        .update(data)\n        .eq('id', state.user.id);\n\n      if (error) throw error;\n\n      // Refresh user data\n      await fetchUserProfile(state.user.id);\n    } catch (error) {\n      setState(prev => ({ ...prev, error: error as Error, loading: false }));\n      throw error;\n    }\n  };\n\n  const refreshProfile = async () => {\n    try {\n      // If already refreshing, exit early\n      if (isRefreshing.current) {\n        console.log('Profile refresh already in progress, skipping');\n        return;\n      }\n\n      console.log('Manually refreshing profile...');\n      setState(prev => ({ ...prev, loading: true, error: null }));\n\n      // Get current user from session\n      const { data: { session } } = await supabase.auth.getSession();\n\n      if (session?.user?.id) {\n        await fetchUserProfile(session.user.id);\n      } else {\n        setState(prev => ({\n          ...prev,\n          loading: false,\n          error: new Error('No authenticated user found')\n        }));\n      }\n    } catch (error) {\n      console.error('Error refreshing profile:', error);\n      setState(prev => ({\n        ...prev,\n        loading: false,\n        error: error as Error\n      }));\n    }\n  };\n\n  const value = {\n    ...state,\n    signIn,\n    signUp,\n    signOut,\n    updateProfile,\n    signInWithGoogle,\n    refreshProfile,\n    forceResetAuth,\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 607, "column": 0}, "map": {"version":3,"sources":["file:///Users/sachinrajm/sachinraj/Projects/vitalapp/components/ui/Button.tsx"],"sourcesContent":["import React from 'react';\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'accent' | 'success' | 'warning' | 'error' | 'ghost';\n  size?: 'sm' | 'md' | 'lg';\n  isLoading?: boolean;\n  leftIcon?: React.ReactNode;\n  rightIcon?: React.ReactNode;\n}\n\nexport const Button: React.FC<ButtonProps> = ({\n  children,\n  variant = 'primary',\n  size = 'md',\n  isLoading = false,\n  leftIcon,\n  rightIcon,\n  className = '',\n  disabled,\n  ...props\n}) => {\n  const baseStyles = 'inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2';\n  \n  const variantStyles = {\n    primary: 'bg-primary-400 text-white hover:bg-primary-500 focus:ring-primary-500',\n    secondary: 'bg-secondary-400 text-white hover:bg-secondary-500 focus:ring-secondary-500',\n    accent: 'bg-accent-400 text-white hover:bg-accent-500 focus:ring-accent-500',\n    success: 'bg-success-500 text-white hover:bg-success-600 focus:ring-success-500',\n    warning: 'bg-warning-500 text-white hover:bg-warning-600 focus:ring-warning-500',\n    error: 'bg-error-500 text-white hover:bg-error-600 focus:ring-error-500',\n    ghost: 'bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500',\n  };\n  \n  const sizeStyles = {\n    sm: 'px-3 py-1.5 text-sm',\n    md: 'px-4 py-2 text-base',\n    lg: 'px-6 py-3 text-lg',\n  };\n  \n  const disabledStyles = 'opacity-50 cursor-not-allowed';\n  \n  const buttonClasses = `\n    ${baseStyles}\n    ${variantStyles[variant]}\n    ${sizeStyles[size]}\n    ${disabled || isLoading ? disabledStyles : ''}\n    ${className}\n  `;\n\n  return (\n    <button \n      className={buttonClasses} \n      disabled={disabled || isLoading}\n      {...props}\n    >\n      {isLoading && (\n        <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-current\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n          <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n          <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n        </svg>\n      )}\n      {!isLoading && leftIcon && <span className=\"mr-2\">{leftIcon}</span>}\n      {children}\n      {!isLoading && rightIcon && <span className=\"ml-2\">{rightIcon}</span>}\n    </button>\n  );\n};"],"names":[],"mappings":";;;;;;AAUO,MAAM,SAAgC,CAAC,EAC5C,QAAQ,EACR,UAAU,SAAS,EACnB,OAAO,IAAI,EACX,YAAY,KAAK,EACjB,QAAQ,EACR,SAAS,EACT,YAAY,EAAE,EACd,QAAQ,EACR,GAAG,OACJ;IACC,MAAM,aAAa;IAEnB,MAAM,gBAAgB;QACpB,SAAS;QACT,WAAW;QACX,QAAQ;QACR,SAAS;QACT,SAAS;QACT,OAAO;QACP,OAAO;IACT;IAEA,MAAM,aAAa;QACjB,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,MAAM,iBAAiB;IAEvB,MAAM,gBAAgB,CAAC;IACrB,EAAE,WAAW;IACb,EAAE,aAAa,CAAC,QAAQ,CAAC;IACzB,EAAE,UAAU,CAAC,KAAK,CAAC;IACnB,EAAE,YAAY,YAAY,iBAAiB,GAAG;IAC9C,EAAE,UAAU;EACd,CAAC;IAED,qBACE,6LAAC;QACC,WAAW;QACX,UAAU,YAAY;QACrB,GAAG,KAAK;;YAER,2BACC,6LAAC;gBAAI,WAAU;gBAA+C,OAAM;gBAA6B,MAAK;gBAAO,SAAQ;;kCACnH,6LAAC;wBAAO,WAAU;wBAAa,IAAG;wBAAK,IAAG;wBAAK,GAAE;wBAAK,QAAO;wBAAe,aAAY;;;;;;kCACxF,6LAAC;wBAAK,WAAU;wBAAa,MAAK;wBAAe,GAAE;;;;;;;;;;;;YAGtD,CAAC,aAAa,0BAAY,6LAAC;gBAAK,WAAU;0BAAQ;;;;;;YAClD;YACA,CAAC,aAAa,2BAAa,6LAAC;gBAAK,WAAU;0BAAQ;;;;;;;;;;;;AAG1D;KAxDa"}},
    {"offset": {"line": 709, "column": 0}, "map": {"version":3,"sources":["file:///Users/sachinrajm/sachinraj/Projects/vitalapp/components/Header.tsx"],"sourcesContent":["\"use client\";\n\nimport React from 'react';\nimport Link from 'next/link';\nimport { Button } from './ui/Button';\nimport { useAuth } from '../context/AuthContext';\nimport { LogIn, User, HeartPulse } from 'lucide-react';\n\nexport function Header() {\n  const { user } = useAuth();\n\n  return (\n    <header className=\"bg-white border-b border-gray-200\">\n      <div className=\"container mx-auto px-4 py-4\">\n        <div className=\"flex items-center justify-between\">\n          <Link href=\"/\" className=\"text-2xl font-bold text-primary-600 flex items-center\">\n            <HeartPulse className=\"h-8 w-8 mr-2\" />\n            Vital\n          </Link>\n\n          <nav>\n            {user ? (\n              <div className=\"flex items-center space-x-6\">\n                <Link href=\"/dashboard\" className=\"text-gray-600 hover:text-gray-900\">\n                  Dashboard\n                </Link>\n                <Link href=\"/requests\" className=\"text-gray-600 hover:text-gray-900\">\n                  Requests\n                </Link>\n                <Link href=\"/donations\" className=\"text-gray-600 hover:text-gray-900\">\n                  Donations\n                </Link>\n                <Link href=\"/profile\">\n                  <Button variant=\"ghost\" className=\"p-2\">\n                    <User className=\"h-5 w-5\" />\n                  </Button>\n                </Link>\n              </div>\n            ) : (\n              <Link href=\"/login\">\n                <Button variant=\"ghost\" className=\"flex items-center space-x-2\">\n                  <LogIn className=\"h-5 w-5\" />\n                  <span>Login</span>\n                </Button>\n              </Link>\n            )}\n          </nav>\n        </div>\n      </div>\n    </header>\n  );\n}"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AAAA;AAAA;;;AANA;;;;;AAQO,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,qIAAO;IAExB,qBACE,6LAAC;QAAO,WAAU;kBAChB,cAAA,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,0KAAI;wBAAC,MAAK;wBAAI,WAAU;;0CACvB,6LAAC,mOAAU;gCAAC,WAAU;;;;;;4BAAiB;;;;;;;kCAIzC,6LAAC;kCACE,qBACC,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,0KAAI;oCAAC,MAAK;oCAAa,WAAU;8CAAoC;;;;;;8CAGtE,6LAAC,0KAAI;oCAAC,MAAK;oCAAY,WAAU;8CAAoC;;;;;;8CAGrE,6LAAC,0KAAI;oCAAC,MAAK;oCAAa,WAAU;8CAAoC;;;;;;8CAGtE,6LAAC,0KAAI;oCAAC,MAAK;8CACT,cAAA,6LAAC,wIAAM;wCAAC,SAAQ;wCAAQ,WAAU;kDAChC,cAAA,6LAAC,6MAAI;4CAAC,WAAU;;;;;;;;;;;;;;;;;;;;;iDAKtB,6LAAC,0KAAI;4BAAC,MAAK;sCACT,cAAA,6LAAC,wIAAM;gCAAC,SAAQ;gCAAQ,WAAU;;kDAChC,6LAAC,oNAAK;wCAAC,WAAU;;;;;;kDACjB,6LAAC;kDAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASxB;GA3CgB;;QACG,qIAAO;;;KADV"}}]
}